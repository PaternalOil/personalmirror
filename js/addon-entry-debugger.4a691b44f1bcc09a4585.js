(window.webpackJsonpGUI=window.webpackJsonpGUI||[]).push([[17],{1468:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));class s{constructor(e,t){this.targetId=e.id,this.id=t.id}}},1471:function(e,t,n){"use strict";t.a=(e,t)=>{const n=document.createElement("a");if(document.body.appendChild(n),navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(t,e);else if("download"in HTMLAnchorElement.prototype){const s=window.URL.createObjectURL(t);n.href=s,n.download=e,n.type=t.type,n.click(),window.setTimeout(()=>{document.body.removeChild(n),window.URL.revokeObjectURL(s)},1e3)}else{let e=window.open("","_blank");const n=new FileReader;n.onloadend=function(){e.location.href=n.result,e=null},n.readAsDataURL(t)}}},1475:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n(1468);const i={block:null,timerID:null};class a{constructor(e){this.addon=e,this.addon.tab.traps.getBlockly().then(e=>{this.blockly=e}),this.vm=this.addon.tab.traps.vm,this.offsetX=32,this.offsetY=32,this.navigationHistory=new o(this),this._workspace=null}getEditingTarget(){return this.vm.runtime.getEditingTarget()}setEditingTarget(e){this.getEditingTarget().id!==e&&this.vm.setEditingTarget(e)}getWorkspace(){const e=Blockly.getMainWorkspace();return e.getToolbox()&&(this._workspace=e),this._workspace}scrollBlockIntoView(e){var t;let n,a=this.getWorkspace();if(e instanceof s.a?(this.setEditingTarget(e.targetId),n=a.getBlockById(e.id)):n=e&&e.id?e:a.getBlockById(e),!n)return;let o=n.getRootBlock(),r=this.getTopOfStackFor(n).getRelativeToSurfaceXY(),g=o.getRelativeToSurfaceXY(),c=a.scale,d=g.x*c,l=r.y*c,u=n.width+d,M=n.height+l,I=a.getMetrics();if(d<I.viewLeft+this.offsetX-4||u>I.viewLeft+I.viewWidth||l<I.viewTop+this.offsetY-4||M>I.viewTop+I.viewHeight){let e=d-I.contentLeft-this.offsetX,t=l-I.contentTop-this.offsetY;this.navigationHistory.storeView(this.navigationHistory.peek(),64),a.scrollbar.set(e,t),this.navigationHistory.storeView({left:e,top:t},64)}null===(t=this.blockly)||void 0===t||t.hideChaff(),class{static flash(e){i.timerID>0&&(clearTimeout(i.timerID),i.block.svgPath_&&(i.block.svgPath_.style.fill=""));let t=4,n=!0;i.block=e,function e(){i.block.svgPath_&&(i.block.svgPath_.style.fill=n?"#ffff80":""),n=!n,t--,t>0?i.timerID=setTimeout(e,200):(i.timerID=0,i.block=null)}()}}.flash(n)}getTopOfStackFor(e){let t=e;for(;t.getOutputShape()&&t.getSurroundParent();)t=t.getSurroundParent();return t}}class o{constructor(e){this.utils=e,this.views=[],this.forward=[]}storeView(e,t){this.forward=[];let n=this.utils.getWorkspace().getMetrics(),s={left:n.viewLeft,top:n.viewTop};(!e||r(s,e)>t)&&this.views.push(s)}peek(){return this.views.length>0?this.views[this.views.length-1]:null}goBack(){const e=this.utils.getWorkspace(),t=e.getMetrics();let n={left:t.viewLeft,top:t.viewTop},s=this.peek();if(!s)return;if(r(n,s)<64&&this.views.length>1&&(this.views.pop(),this.forward.push(s)),s=this.peek(),!s)return;let i=s.left-t.contentLeft,a=s.top-t.contentTop;e.scrollbar.set(i,a)}goForward(){let e=this.forward.pop();if(!e)return;this.views.push(e);let t=this.utils.getWorkspace(),n=t.getMetrics(),s=e.left-n.contentLeft,i=e.top-n.contentTop;t.scrollbar.set(s,i)}}function r(e,t){return Math.sqrt(Math.pow(e.left-t.left,2)+Math.pow(e.top-t.top,2))}},1523:function(e,t,n){var s=n(202);(e.exports=n(10)(!1)).push([e.i,'[dir="ltr"] .sa-debugger-container {\n  margin-right: 0.2rem;\n}\n\n[dir="rtl"] .sa-debugger-container {\n  margin-left: 0.2rem;\n}\n\n.sa-debugger-small .sa-debugger-container {\n  display: none !important;\n}\n\n.sa-debugger-interface {\n  display: none;\n  position: absolute;\n  z-index: 492;\n  background-color: white;\n  width: 565px;\n  height: 25rem;\n}\n\n.sa-debugger-interface h1 {\n  padding: 10px;\n  z-index: 10;\n  width: calc(100% - 20px);\n  font-size: 20px;\n}\n\n.sa-debugger-tabs {\n  margin: 0;\n  display: flex;\n  align-items: center;\n  padding: 0 15px;\n  font-size: 0.75rem;\n}\n.sa-debugger-tabs li {\n  margin: 0;\n  display: flex;\n  align-items: center;\n  padding: 0.5em 1em;\n  background-color: rgba(0, 0, 0, 0.1);\n  border: 1px solid rgba(0, 0, 0, 0.15);\n  border-radius: 1rem;\n  color: white;\n  cursor: pointer;\n}\n.sa-debugger-tabs li + li {\n  margin-inline-start: 10px;\n}\n.sa-debugger-tabs li:hover {\n  background-color: rgba(0, 0, 0, 0.15);\n}\n.sa-debugger-tabs li.sa-debugger-tab-selected {\n  background-color: white;\n  background-clip: padding-box;\n  border-color: rgba(0, 0, 0, 0.25);\n  color: #4d97ff;\n}\n.sa-debugger-tabs li img {\n  margin: 0;\n  margin-right: 0.25rem;\n  width: 1rem;\n  filter: brightness(0) invert(1);\n}\n.sa-debugger-tabs li.sa-debugger-tab-selected img {\n  filter: none;\n}\n\n.sa-debugger-header-buttons img {\n  width: 20px;\n  height: 20px;\n}\n\n.sa-debugger-unpause {\n  animation: saDebuggerUnpause 2s infinite alternate;\n}\n\n@keyframes saDebuggerUnpause {\n  0% {\n    background-color: rgba(0, 0, 0, 0.15);\n  }\n  100% {\n    background-color: rgba(0, 0, 0, 0);\n  }\n}\n\n.sa-debugger-tab-content {\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  cursor: auto;\n}\n\n.sa-debugger-chart {\n  width: 100%;\n  height: 100%;\n}\n\n.sa-performance-tab-content {\n  padding: 15px;\n}\n\n.sa-debugger-log-outer {\n  height: 100%;\n}\n\n.sa-debugger-log-inner {\n  position: relative;\n  overflow-y: auto;\n  font-size: 12px;\n  line-height: 1.2;\n  height: 100%;\n  contain: strict;\n}\n\n.sa-debugger-log-empty {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  font-size: 20px;\n  font-style: italic;\n}\n\n.sa-debugger-log-end {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 1px;\n  height: 1px;\n}\n\n.sa-debugger-log {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 20px;\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.15);\n  padding-left: 4px;\n  font-family: monospace;\n  color: #000;\n}\n.sa-debugger-log[data-type="warn"] {\n  border-color: hsl(50deg, 100%, 75%);\n  color: hsl(39deg 100% 18%);\n  background-color: hsl(50deg 100% 95%);\n}\n.sa-debugger-log[data-type="error"] {\n  border-color: hsl(0deg 100% 92%);\n  color: red;\n  background-color: hsl(0deg 100% 95%);\n}\n\n.sa-debugger-log-repeats {\n  background-color: hsla(163, 85%, 40%, 1);\n  color: white;\n  border-radius: 100px;\n  padding: 1px 6px;\n  margin-right: 4px;\n}\n\n.sa-debugger-log-icon {\n  width: 16px;\n  height: 16px;\n  margin-right: 4px;\n}\n[data-type="warn"] .sa-debugger-log-icon {\n  background-image: url('+s(n(1524))+');\n}\n[data-type="error"] .sa-debugger-log-icon {\n  background-image: url('+s(n(1525))+");\n}\n.sa-debugger-threads .sa-debugger-log-icon {\n  background-image: url("+s(n(1526))+');\n}\n\n.sa-debugger-log-link {\n  color: inherit;\n  cursor: pointer;\n  opacity: 0.5;\n  text-decoration: underline;\n  float: right;\n  text-align: right;\n  max-width: 100%;\n  padding-left: 4px;\n  margin-right: 4px;\n  margin-left: auto;\n}\n.sa-debugger-log-link:hover {\n  text-decoration: underline;\n  color: #4d97ff;\n  opacity: 1;\n}\n.sa-debugger-log-link-unknown {\n  pointer-events: none;\n}\n\n.sa-debugger-log-text {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: pre;\n}\n.sa-debugger-log-text-empty {\n  font-style: italic;\n}\n.sa-debugger-log-internal .sa-debugger-log-text {\n  font-style: italic;\n}\n\n.sa-debugger-thread-indent {\n  width: calc(16px * var(--level));\n  margin-right: 4px;\n}\n.sa-debugger-thread-title .sa-debugger-thread-indent {\n  margin: 0;\n}\n.sa-debugger-thread-target-name {\n  font-weight: bold;\n  margin-right: 8px;\n}\n.sa-debugger-thread-running {\n  background-color: rgba(255, 187, 0, 0.233);\n  font-weight: bold;\n}\n\n.sa-debugger-block-preview {\n  color: white;\n  padding: 1px 6px;\n  margin-right: 4px;\n}\n.sa-debugger-block-preview[data-shape="round"] {\n  border-radius: 100px;\n}\n.sa-debugger-block-preview[data-shape="stacked"] {\n  border-radius: 3px;\n}\n',""])},1524:function(e,t,n){e.exports=n.p+"static/assets/0e009d6e684951615b31a267baa37636.svg"},1525:function(e,t,n){e.exports=n.p+"static/assets/76b6cb627b95d79705c0b41664064f0e.svg"},1526:function(e,t,n){e.exports=n.p+"static/assets/c846a442121113b1d04f6b9d50912038.svg"},1568:function(e,t,n){"use strict";n.r(t),n.d(t,"resources",(function(){return x}));var s="data:image/svg+xml;base64,PHN2ZyBkYXRhLW5hbWU9IkxheWVyIDEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDcuNDggNy40OCIgc3R5bGU9InRyYW5zZm9ybTpyb3RhdGUoNDVkZWcpIj48cGF0aCBkPSJNMy43NCA2LjQ4VjFNMSAzLjc0aDUuNDgiIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiNmZmY7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS13aWR0aDoycHgiLz48L3N2Zz4=",i="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgc3Ryb2tlPSIjNEM5N0ZGIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBhdGggc3R5bGU9ImZpbGw6IzU3NWU3NTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MTtwYWludC1vcmRlcjptYXJrZXJzIHN0cm9rZSBmaWxsIiBkPSJNNCAzLjVjLS44MzEgMC0xLjUuNjY5LTEuNSAxLjV2MTBjMCAuODMxLjY2OSAxLjUgMS41IDEuNWgxMmMuODMxIDAgMS41LS42NjkgMS41LTEuNVY1YzAtLjgzMS0uNjY5LTEuNS0xLjUtMS41Wm0wIDFoMTJjLjI3NyAwIC41LjIyMy41LjV2MTBjMCAuMjc3LS4yMjMuNS0uNS41SDRhLjQ5OS40OTkgMCAwIDEtLjUtLjVWNWMwLS4yNzcuMjIzLS41LjUtLjVaIiBzdHJva2U9Im5vbmUiLz48cGF0aCBkPSJtNS40MTcgNy41IDMuNzUgMi41LTMuNzUgMi41bTUgMGg0LjE2NiIgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzhmOGY4ZjtzdHJva2Utd2lkdGg6MTtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIi8+PC9nPjxjaXJjbGUgZmlsbD0iIzRDOTdGRiIgY3g9IjE2IiBjeT0iNCIgcj0iMyIvPjwvc3ZnPg==",a="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgc3Ryb2tlPSIjNEM5N0ZGIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBhdGggc3R5bGU9ImZpbGw6IzU3NWU3NTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MTtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MTtwYWludC1vcmRlcjptYXJrZXJzIHN0cm9rZSBmaWxsIiBkPSJNNCAzLjVjLS44MzEgMC0xLjUuNjY5LTEuNSAxLjV2MTBjMCAuODMxLjY2OSAxLjUgMS41IDEuNWgxMmMuODMxIDAgMS41LS42NjkgMS41LTEuNVY1YzAtLjgzMS0uNjY5LTEuNS0xLjUtMS41Wm0wIDFoMTJjLjI3NyAwIC41LjIyMy41LjV2MTBjMCAuMjc3LS4yMjMuNS0uNS41SDRhLjQ5OS40OTkgMCAwIDEtLjUtLjVWNWMwLS4yNzcuMjIzLS41LjUtLjVaIiBzdHJva2U9Im5vbmUiLz48cGF0aCBkPSJtNS40MTcgNy41IDMuNzUgMi41LTMuNzUgMi41bTUgMGg0LjE2NiIgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzhmOGY4ZjtzdHJva2Utd2lkdGg6MTtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIi8+PC9nPjwvc3ZnPg==",o="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGQ9Ik00LjU0OCA3aDEwLjkwNGEuNS41IDAgMCAxIC40OTguNTQ1bC0uNzg1IDguNjM1QTIgMiAwIDAgMSAxMy4xNzQgMThINi44MjdhMiAyIDAgMCAxLTEuOTkyLTEuODJMNC4wNSA3LjU0NkEuNS41IDAgMCAxIDQuNTQ4IDd6bTIuNzg1LTMgLjU1My0xLjY1OEEuNS41IDAgMCAxIDguMzYgMmgzLjI4YS41LjUgMCAwIDEgLjQ3NC4zNDJMMTIuNjY3IDRIMTYuNWEuNS41IDAgMCAxIC41LjV2MWEuNS41IDAgMCAxLS41LjVoLTEzYS41LjUgMCAwIDEtLjUtLjV2LTFhLjUuNSAwIDAgMSAuNS0uNWgzLjgzM3ptMS4wNTQgMGgzLjIyNmwtLjMzNC0xSDguNzIxbC0uMzM0IDF6TTEwIDExLjcybDEuNTk1LTEuNTk1YS41LjUgMCAwIDEgLjcwNyAwbC4wNzMuMDczYS41LjUgMCAwIDEgMCAuNzA3TDEwLjc4IDEyLjVsMS41OTUgMS41OTVhLjUuNSAwIDAgMSAwIC43MDdsLS4wNzMuMDczYS41LjUgMCAwIDEtLjcwNyAwTDEwIDEzLjI4bC0xLjU5NSAxLjU5NWEuNS41IDAgMCAxLS43MDcgMGwtLjA3My0uMDczYS41LjUgMCAwIDEgMC0uNzA3TDkuMjIgMTIuNWwtMS41OTUtMS41OTVhLjUuNSAwIDAgMSAwLS43MDdsLjA3My0uMDczYS41LjUgMCAwIDEgLjcwNyAwTDEwIDExLjcyeiIgaWQ9ImEiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48bWFzayBpZD0iYiIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48ZyBtYXNrPSJ1cmwoI2IpIiBmaWxsPSIjRkZGIj48cGF0aCBkPSJNMCAwaDIwdjIwSDB6Ii8+PC9nPjwvZz48L3N2Zz4=",r="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTE0LjczIDguNzc5LTQuMjUzIDQuMjY0YS42MTkuNjE5IDAgMCAxLS44OSAwTDUuMzM2IDguNzc5QS42My42MyAwIDAgMSA1Ljc4OCA3LjdoMi4xMTdsMS4yNjMtNS4wMTZhLjkxMi45MTIgMCAwIDEgMS4xMDYtLjY1Ni44OS44OSAwIDAgMSAuNjY4LjY1NkwxMi4yMDYgNy43aDIuMDcyYy41NTkgMCAuODU2LjY3LjQ1MSAxLjA3OHpNMTggMTEuODEydjIuNTc5QzE4IDE2LjM3NSAxNi4zOTUgMTggMTQuNDE3IDE4SDUuNkEzLjYwNyAzLjYwNyAwIDAgMSAyIDE0LjM5di0yLjU3OGExLjE3IDEuMTcgMCAxIDEgMi4zMzcgMHYyLjU3OUExLjI3IDEuMjcgMCAwIDAgNS42IDE1LjY1Nmg4LjgxN2MuNjg2IDAgMS4yNDYtLjU3OCAxLjI0Ni0xLjI2NXYtMi41NzljMC0uNjU2LjUzLTEuMTcyIDEuMTY5LTEuMTcyLjY1NCAwIDEuMTY4LjUxNiAxLjE2OCAxLjE3MnoiIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==",g="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHN0eWxlPSItbXMtdHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpOy13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpO3RyYW5zZm9ybTpyb3RhdGUoMzYwZGVnKSI+PHBhdGggZD0iTTEyIDE0YTEuMjUgMS4yNSAwIDEgMCAxLjI1IDEuMjVBMS4yNSAxLjI1IDAgMCAwIDEyIDE0em0wLTEuNWExIDEgMCAwIDAgMS0xdi0zYTEgMSAwIDAgMC0yIDB2M2ExIDEgMCAwIDAgMSAxek0xMiAyYTEwIDEwIDAgMSAwIDEwIDEwQTEwLjAxMSAxMC4wMTEgMCAwIDAgMTIgMnptMCAxOGE4IDggMCAxIDEgOC04IDguMDEgOC4wMSAwIDAgMS04IDh6IiBmaWxsPSJyZWQiLz48L3N2Zz4=",c="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHN0eWxlPSItbXMtdHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpOy13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpO3RyYW5zZm9ybTpyb3RhdGUoMzYwZGVnKSI+PHBhdGggZD0iTTMgN2gxOGExIDEgMCAwIDAgMC0ySDNhMSAxIDAgMCAwIDAgMnptMCA0aDE0YTEgMSAwIDAgMCAwLTJIM2ExIDEgMCAwIDAgMCAyem0xOCAySDNhMSAxIDAgMCAwIDAgMmgxOGExIDEgMCAwIDAgMC0yem0tNCA0SDNhMSAxIDAgMCAwIDAgMmgxNGExIDEgMCAwIDAgMC0yeiIgZmlsbD0iIzRjOTdmZiIvPjwvc3ZnPg==",d="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiPjxwYXRoIHN0cm9rZT0iIzRjOTdmZiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjIiIGQ9Ik05IDE5di02YTIgMiAwIDAgMC0yLTJINWEyIDIgMCAwIDAtMiAydjZhMiAyIDAgMCAwIDIgMmgyYTIgMiAwIDAgMCAyLTJ6bTAgMFY5YTIgMiAwIDAgMSAyLTJoMmEyIDIgMCAwIDEgMiAydjEwbS02IDBhMiAyIDAgMCAwIDIgMmgyYTIgMiAwIDAgMCAyLTJtMCAwVjVhMiAyIDAgMCAxIDItMmgyYTIgMiAwIDAgMSAyIDJ2MTRhMiAyIDAgMCAxLTIgMmgtMmEyIDIgMCAwIDEtMi0yeiIvPjwvc3ZnPg==",l="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDkiIGhlaWdodD0iNTIiIHZpZXdCb3g9Ii01IDAgNDkgNDgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGQ9Ik0xNy4yMjEgOC4zNDVjMi41NTYtNC4yNTkgNi43MDItNC4yNTIgOS4yNTQgMGwxMy42NzcgMjIuNzk2YzIuNTU1IDQuMjU4LjU5NyA3LjcxLTQuMzggNy43MUg3LjkyNGMtNC45NzMgMC02LjkzLTMuNDU4LTQuMzgtNy43MUwxNy4yMjIgOC4zNDV6IiBpZD0iYSIvPjwvZGVmcz48dXNlIHN0cm9rZT0iI0ZGRiIgZmlsbD0iI0ZGRiIgeGxpbms6aHJlZj0iI2EiIHRyYW5zZm9ybT0icm90YXRlKDkwIDIwLjg1IDIzLjAwMykiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==",u="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkiIGhlaWdodD0iMTkiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMjIuNjggMTIuMmExLjYgMS42IDAgMCAxLTEuMjcuNjNoLTcuNjlhMS41OSAxLjU5IDAgMCAxLTEuMTYtMi41OGwxLjEyLTEuNDFhNC44MiA0LjgyIDAgMCAwLTMuMTQtLjc3IDQuMzEgNC4zMSAwIDAgMC0yIC44QTQuMjUgNC4yNSAwIDAgMCA3LjIgMTAuNmE1LjA2IDUuMDYgMCAwIDAgLjU0IDQuNjJBNS41OCA1LjU4IDAgMCAwIDEyIDE3Ljc0YTIuMjYgMi4yNiAwIDAgMS0uMTYgNC41MkExMC4yNSAxMC4yNSAwIDAgMSAzLjc0IDE4YTEwLjE0IDEwLjE0IDAgMCAxLTEuNDktOS4yMiA5LjcgOS43IDAgMCAxIDIuODMtNC4xNEE5LjkyIDkuOTIgMCAwIDEgOS42NiAyLjVhMTAuNjYgMTAuNjYgMCAwIDEgNy43MiAxLjY4bDEuMDgtMS4zNWExLjU3IDEuNTcgMCAwIDEgMS4yNC0uNiAxLjYgMS42IDAgMCAxIDEuNTQgMS4yMWwxLjcgNy4zN2ExLjU3IDEuNTcgMCAwIDEtLjI2IDEuMzlaIiBzdHlsZT0iZmlsbDojZmZmIi8+PHBhdGggZD0iTTIxLjM4IDExLjgzaC03LjYxYS41OS41OSAwIDAgMS0uNDMtMWwxLjc1LTIuMTlhNS45IDUuOSAwIDAgMC00LjctMS41OCA1LjA3IDUuMDcgMCAwIDAtNC4xMSAzLjE3QTYgNiAwIDAgMCA3IDE1Ljc3YTYuNTEgNi41MSAwIDAgMCA1IDIuOTIgMS4zMSAxLjMxIDAgMCAxLS4wOCAyLjYyIDkuMyA5LjMgMCAwIDEtNy4zNS0zLjgyIDkuMTYgOS4xNiAwIDAgMS0xLjQtOC4zN0E4LjUxIDguNTEgMCAwIDEgNS43MSA1LjRhOC43NiA4Ljc2IDAgMCAxIDQuMTEtMS45MiA5LjcxIDkuNzEgMCAwIDEgNy43NSAyLjA3bDEuNjctMi4xYS41OS41OSAwIDAgMSAxIC4yMUwyMiAxMS4wOGEuNTkuNTkgMCAwIDEtLjYyLjc1WiIgc3R5bGU9ImZpbGw6I2ZmZiIvPjwvc3ZnPg==",M="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHN0eWxlPSItbXMtdHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpOy13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpO3RyYW5zZm9ybTpyb3RhdGUoMzYwZGVnKSI+PHBhdGggZD0iTTIwLjkyIDEyLjYyYTEgMSAwIDAgMC0uMjEtLjMzbC0zLTNhMSAxIDAgMCAwLTEuNDIgMS40MmwxLjMgMS4yOUg4YTEgMSAwIDAgMS0xLTFWN2ExIDEgMCAwIDAtMiAwdjRhMyAzIDAgMCAwIDMgM2g5LjU5bC0xLjMgMS4yOWExIDEgMCAwIDAgMCAxLjQyIDEgMSAwIDAgMCAxLjQyIDBsMy0zYTEgMSAwIDAgMCAuMjEtLjMzIDEgMSAwIDAgMCAwLS43NnoiIGZpbGw9ImdyYXkiLz48L3N2Zz4=",I="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHN0eWxlPSItbXMtdHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpOy13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpO3RyYW5zZm9ybTpyb3RhdGUoMzYwZGVnKSI+PHBhdGggZD0iTTE5IDJIOWEzIDMgMCAwIDAtMyAzdjFINWEzIDMgMCAwIDAtMyAzdjEwYTMgMyAwIDAgMCAzIDNoMTBhMyAzIDAgMCAwIDMtM3YtMWgxYTMgMyAwIDAgMCAzLTNWNWEzIDMgMCAwIDAtMy0zem0tMyAxN2ExIDEgMCAwIDEtMSAxSDVhMSAxIDAgMCAxLTEtMXYtN2gxMnptMC05SDRWOWExIDEgMCAwIDEgMS0xaDEwYTEgMSAwIDAgMSAxIDF6bTQgNWExIDEgMCAwIDEtMSAxaC0xVjlhMyAzIDAgMCAwLS4xOC0xSDIwem0wLTlIOFY1YTEgMSAwIDAgMSAxLTFoMTBhMSAxIDAgMCAxIDEgMXoiIGZpbGw9IiM0Yzk3ZmYiLz48L3N2Zz4=",h="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxZW0iIGhlaWdodD0iMWVtIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHN0eWxlPSItbXMtdHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpOy13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpO3RyYW5zZm9ybTpyb3RhdGUoMzYwZGVnKSI+PHBhdGggZD0iTTEyIDE2YTEgMSAwIDEgMCAxIDEgMSAxIDAgMCAwLTEtMXptMTAuNjcgMS40Ny04LjA1LTE0YTMgMyAwIDAgMC01LjI0IDBsLTggMTRBMyAzIDAgMCAwIDMuOTQgMjJoMTYuMTJhMyAzIDAgMCAwIDIuNjEtNC41M3ptLTEuNzMgMmExIDEgMCAwIDEtLjg4LjUxSDMuOTRhMSAxIDAgMCAxLS44OC0uNTEgMSAxIDAgMCAxIDAtMWw4LTE0YTEgMSAwIDAgMSAxLjc4IDBsOC4wNSAxNGExIDEgMCAwIDEgLjA1IDEuMDJ6TTEyIDhhMSAxIDAgMCAwLTEgMXY0YTEgMSAwIDAgMCAyIDBWOWExIDEgMCAwIDAtMS0xeiIgZmlsbD0iI2UwYmIwMCIvPjwvc3ZnPg==",m=n(1470),b=n(1471);const p=(e,t,n)=>Math.max(t,Math.min(n,e)),A=(e,t)=>{const n=+t.dataset.index;let s=!1;for(const i of e.children){if(+i.dataset.index>n){s=!0,e.insertBefore(t,i);break}}s||e.appendChild(t)};var w=class{constructor(){this.rows=[],this.canAutoScrollToEnd=!0,this.rowHeight=20,this.outerElement=document.createElement("div"),this.outerElement.className="sa-debugger-log-outer",this.innerElement=document.createElement("div"),this.innerElement.className="sa-debugger-log-inner",this.outerElement.appendChild(this.innerElement),this.innerElement.addEventListener("scroll",this._handleScroll.bind(this),{passive:!0}),this.innerElement.addEventListener("wheel",this._handleWheel.bind(this),{passive:!0}),this.endElement=document.createElement("div"),this.endElement.className="sa-debugger-log-end",this.endElement.dataset.index="-1",this.innerElement.appendChild(this.endElement),this.placeholderElement=document.createElement("div"),this.placeholderElement.className="sa-debugger-log-empty",this.visible=!1,this.isScrolledToEnd=!0,this.scrollTopWhenHidden="end",this.scrollTop=0,this.updateContentQueued=!1,this.scrollToEndQueued=!1,this.oldLength=-1,this.rowToMetadata=new Map}append(e){this.queueUpdateContent(),this._queueScrollToEnd(),this.rows.push(e);for(;this.rows.length>2e5;)this.rows.shift()}clear(){this.rows.length=0,this.scrollTop=0,this.isScrolledToEnd=!0,this.queueUpdateContent()}show(){this.visible=!0,this.height=this.innerElement.offsetHeight,this.queueUpdateContent(),"end"===this.scrollTopWhenHidden?this._queueScrollToEnd():this.innerElement.scrollTop=this.scrollTopWhenHidden}hide(){this.visible=!1,this.scrollTopWhenHidden=this.isScrolledToEnd?"end":this.scrollTop}_handleScroll(e){this.scrollTop=e.target.scrollTop,this.isScrolledToEnd=e.target.scrollTop+5>=e.target.scrollHeight-e.target.clientHeight,this.queueUpdateContent()}_handleWheel(e){e.deltaY<0&&(this.isScrolledToEnd=!1)}scrollIntoView(e){const t=e*this.rowHeight,n=this.scrollTop,s=this.scrollTop+this.height;t>n&&t<s||(this.scrollTop=t,this.innerElement.scrollTop=t)}_queueScrollToEnd(){this.visible&&this.canAutoScrollToEnd&&this.isScrolledToEnd&&!this.scrollToEndQueued&&(this.scrollToEndQueued=!0,queueMicrotask(()=>{if(this.scrollToEndQueued=!1,this.isScrolledToEnd){const e=this.innerElement.scrollHeight-this.innerElement.offsetHeight;this.innerElement.scrollTop=e,this.scrollTop=e}}))}queueUpdateContent(){this.visible&&!this.updateContentQueued&&(this.updateContentQueued=!0,queueMicrotask(()=>{this.updateContentQueued=!1,this.updateContent()}))}generateRow(e){}renderRow(e,t){}updateContent(){if(this.rows.length!==this.oldLength){this.oldLength=this.rows.length;const e=this.rows.length*this.rowHeight;if(this.endElement.style.transform="translateY(".concat(e,"px)"),this.rows.length)this.placeholderElement.remove();else{this.innerElement.appendChild(this.placeholderElement);for(const e of this.rowToMetadata.values())e.elements.root.remove();this.rowToMetadata.clear()}}if(0===this.rows.length)return;const e=Math.floor(this.scrollTop/this.rowHeight),t=Math.ceil(this.height/this.rowHeight),n=p(e-5,0,this.rows.length),s=p(e+t+5,0,this.rows.length),i=new Set,a=[];for(let e=n;e<s;e++){const t=this.rows[e];i.add(t);let n=this.rowToMetadata.get(t);if(!n){const e=this.generateRow(t);a.push(e.root),n={stringify:null,elements:e},this.rowToMetadata.set(t,n)}const s=JSON.stringify(t);s!==n.stringify&&(n.stringify=s,this.renderRow(n.elements,t));const o=n.elements.root;o.style.transform="translateY(".concat(e*this.rowHeight,"px)"),o.dataset.index=e}for(const[e,t]of this.rowToMetadata.entries())i.has(e)||(t.elements.root.remove(),this.rowToMetadata.delete(e));for(const e of a)A(this.innerElement,e)}};const D=e=>{if("/icons/close.svg"===e)return s;if("/icons/debug-unread.svg"===e)return i;if("/icons/debug.svg"===e)return a;if("/icons/delete.svg"===e)return o;if("/icons/download-white.svg"===e)return r;if("/icons/error.svg"===e)return g;if("/icons/logs.svg"===e)return c;if("/icons/performance.svg"===e)return d;if("/icons/play.svg"===e)return l;if("/icons/step.svg"===e)return u;if("/icons/subthread.svg"===e)return M;if("/icons/threads.svg"===e)return I;if("/icons/warning.svg"===e)return h;throw new Error("Unknown asset: ".concat(e))};async function y({debug:e,addon:t,console:n,msg:s}){const i=t.tab.traps.vm,a=e.createHeaderTab({text:s("tab-logs"),icon:D("/icons/logs.svg")}),o=new w;o.placeholderElement.textContent=s("no-logs");o.generateRow=t=>{const n=document.createElement("div");n.className="sa-debugger-log",t.internal&&n.classList.add("sa-debugger-log-internal"),n.dataset.type=t.type;const a=document.createElement("div");a.className="sa-debugger-log-icon","warn"!==t.type&&"error"!==t.type||(a.title=s("icon-"+t.type)),n.appendChild(a);const o=document.createElement("div");if(o.className="sa-debugger-log-repeats",o.style.display="none",n.appendChild(o),t.preview&&t.blockId&&t.targetId){const s=((e,t)=>{var n;const s=i.runtime.getTargetById(e).blocks.getBlock(t);return s?null===(n=Object.values(s.inputs)[0])||void 0===n?void 0:n.block:null})(t.targetId,t.blockId);if(s){const i=e.createBlockPreview(t.targetId,s);i&&n.appendChild(i)}}const r=document.createElement("div");return r.className="sa-debugger-log-text",0===t.text.length?(r.classList.add("sa-debugger-log-text-empty"),r.textContent=s("empty-string")):(r.textContent=t.text,r.title=t.text),n.appendChild(r),t.targetId&&t.blockId&&n.appendChild(e.createBlockLink(t.targetId,t.blockId)),{root:n,repeats:o}},o.renderRow=(e,t)=>{const{repeats:n}=e;t.count>1&&(n.style.display="",n.textContent=t.count)};const r=e.createHeaderButton({text:s("export"),icon:D("/icons/download-white.svg"),description:s("export-desc")});r.element.addEventListener("click",t=>{const n=t.shiftKey?prompt(s("enter-format"),"{sprite}: {content} ({type})"):"{sprite}: {content} ({type})";if(!n)return;const i=o.rows.map(({text:t,targetId:s,type:i,count:a})=>(n.replace(/\{(sprite|type|content)\}/g,(n,a)=>({sprite:e.getTargetInfoById(s).name,type:i,content:t}[a]))+"\n").repeat(a)).join("");var a,r;a="logs.txt",r=i,Object(b.a)(a,new Blob([r],{type:"text/plain"}))});const g=e.createHeaderButton({text:s("clear"),icon:D("/icons/delete.svg")});g.element.addEventListener("click",()=>{c()});const c=()=>{o.clear()};return{tab:a,content:o.outerElement,buttons:[r,g],show:()=>{o.show(),e.setHasUnreadMessage(!1)},hide:()=>{o.hide()},addLog:(t,n,s)=>{const i={text:t,type:s,count:1,preview:!0};n&&(i.blockId=n.peekStack(),i.targetId=n.target.id),"internal"===s&&(i.internal=!0,i.preview=!1,i.type="log"),"internal-warn"===s&&(i.internal=!0,i.type="warn");const a=o.rows[o.rows.length-1];var r,g;a&&(g=a,(r=i).text===g.text&&r.type===g.type&&r.internal===g.internal&&r.blockId===g.blockId&&r.targetId===g.targetId)?(a.count++,o.queueUpdateContent()):o.append(i),o.visible||i.internal||e.setHasUnreadMessage(!0)},clearLogs:c}}var L=n(1475);const N=e=>{if("/icons/close.svg"===e)return s;if("/icons/debug-unread.svg"===e)return i;if("/icons/debug.svg"===e)return a;if("/icons/delete.svg"===e)return o;if("/icons/download-white.svg"===e)return r;if("/icons/error.svg"===e)return g;if("/icons/logs.svg"===e)return c;if("/icons/performance.svg"===e)return d;if("/icons/play.svg"===e)return l;if("/icons/step.svg"===e)return u;if("/icons/subthread.svg"===e)return M;if("/icons/threads.svg"===e)return I;if("/icons/warning.svg"===e)return h;throw new Error("Unknown asset: ".concat(e))},j=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)};var E=n(1523);const x={"userscript.js":async function({addon:e,global:t,console:n,msg:s}){let i;Object(m.e)(e.tab.traps.vm);const a=[],o=(...e)=>{i?i.addLog(...e):a.push(e)};let r=!1;e.tab.addBlock("​​breakpoint​​",{args:[],displayName:s("block-breakpoint"),callback:(t,n)=>{e.tab.redux.state.scratchGui.mode.isPlayerOnly?r||(o(s("cannot-pause-player"),n,"error"),r=!0):(Object(m.d)(!0),D(!0))}}),e.tab.addBlock("​​log​​ %s",{args:["content"],displayName:s("block-log"),callback:({content:e},t)=>{o(e,t,"log")}}),e.tab.addBlock("​​warn​​ %s",{args:["content"],displayName:s("block-warn"),callback:({content:e},t)=>{o(e,t,"warn")}}),e.tab.addBlock("​​error​​ %s",{args:["content"],displayName:s("block-error"),callback:({content:e},t)=>{o(e,t,"error")}});const g=e.tab.traps.vm;await new Promise((e,t)=>{if(g.editingTarget)return e();g.runtime.once("PROJECT_LOADED",e)});const c=await e.tab.traps.getBlockly(),d=document.createElement("div");d.className="sa-debugger-container";const l=document.createElement("div");l.className=e.tab.scratchClass("button_outlined-button","stage-header_stage-button");const u=document.createElement("div");u.className=e.tab.scratchClass("button_content");const M=document.createElement("img");M.className=e.tab.scratchClass("stage-header_stage-button-icon"),M.draggable=!1,M.src=N("/icons/debug.svg"),u.appendChild(M),l.appendChild(u),d.appendChild(l),l.addEventListener("click",()=>D(!0));const I=Object.assign(document.createElement("div"),{className:e.tab.scratchClass("card_card",{others:"sa-debugger-interface"})}),h=Object.assign(document.createElement("div"),{className:e.tab.scratchClass("card_header-buttons")}),b=Object.assign(document.createElement("ul"),{className:"sa-debugger-tabs"}),p=Object.assign(document.createElement("div"),{className:e.tab.scratchClass("card_header-buttons-right",{others:"sa-debugger-header-buttons"})}),A=Object.assign(document.createElement("div"),{className:"sa-debugger-tab-content"});let w=!1;const D=e=>{w=e,I.style.display=w?"flex":"",w?Q.show():Q.hide()};let E=0,x=0,T=0,S=0;const v=()=>{document.removeEventListener("mouseup",v),document.removeEventListener("mousemove",f)},C=(e,t)=>{T=e,S=t;const n=(document.documentElement.clientWidth||document.body.clientWidth)-1,s=(document.documentElement.clientHeight||document.body.clientHeight)-1,i=Math.max(0,Math.min(e-E,n-I.offsetWidth)),a=Math.max(0,Math.min(t-x,s-I.offsetHeight));I.style.left=i+"px",I.style.top=a+"px"},f=e=>{e.preventDefault(),C(e.clientX,e.clientY)};window.addEventListener("resize",()=>{C(T,S)}),h.addEventListener("mousedown",e=>{e.preventDefault(),E=e.clientX-I.offsetLeft,x=e.clientY-I.offsetTop,T=e.clientX,S=e.clientY,document.addEventListener("mouseup",v),document.addEventListener("mousemove",f)}),h.append(b,p),I.append(h,A),document.body.append(I);const k=({text:t,icon:n,description:s})=>{const i=Object.assign(document.createElement("div"),{className:e.tab.scratchClass("card_shrink-expand-button"),draggable:!1});s&&(i.title=s);const a=Object.assign(document.createElement("img"),{src:n,draggable:!1}),o=Object.assign(document.createElement("span"),{textContent:t});return i.appendChild(a),i.appendChild(o),{element:i,image:a,text:o}},z=k({text:s("unpause"),icon:N("/icons/play.svg")});z.element.classList.add("sa-debugger-unpause"),z.element.addEventListener("click",()=>Object(m.d)(!1));const Z=e=>{z.element.style.display=e?"":"none"};Z(Object(m.b)()),Object(m.c)(Z);const W=k({text:s("close"),icon:N("/icons/close.svg")});W.element.addEventListener("click",()=>D(!1));const O=g.runtime._step,Y=[];g.runtime._step=function(...e){const t=O.call(this,...e);for(const e of Y)e();return t};const H=e=>{const t=g.runtime.getTargetById(e);if(t){let e=t.getName(),n=t;return t.isOriginal||(e=s("clone-of",{sprite:e}),n=t.sprite.clones[0]),{exists:!0,originalId:n.id,name:e}}return{exists:!1,original:null,name:s("unknown-sprite")}},G=e=>{e!==g.editingTarget.id&&g.runtime.getTargetById(e)&&g.setEditingTarget(e)},U=()=>{const t=e.tab.redux;0!==t.state.scratchGui.editorTab.activeTabIndex&&t.dispatch({type:"scratch-gui/navigation/ACTIVATE_TAB",activeTabIndex:0})},B=t=>{const n=Blockly.getMainWorkspace().getBlockById(t);n&&(n.workspace.isFlyout||new L.a(e).scrollBlockIntoView(t))},J=e=>e.replace(/%[nbs]/g,"()"),P={debug:{createHeaderButton:k,createHeaderTab:({text:e,icon:t})=>{const n=document.createElement("li"),s=Object.assign(document.createElement("img"),{src:t,draggable:!1}),i=Object.assign(document.createElement("span"),{textContent:e});return n.appendChild(s),n.appendChild(i),{element:n,image:s,text:i}},setHasUnreadMessage:e=>{const t=N(e?"/icons/debug-unread.svg":"/icons/debug.svg");M.src!==t&&(M.src=t)},addAfterStepCallback:e=>{Y.push(e)},getTargetInfoById:H,createBlockLink:(e,t)=>{const n=document.createElement("a");n.className="sa-debugger-log-link";const{exists:s,name:i,originalId:a}=H(e);return n.textContent=i,s?n.addEventListener("mousedown",()=>{G(a),U(),B(t)}):n.classList.add("sa-debugger-log-link-unknown"),n},createBlockPreview:(t,n)=>{const s=g.runtime.getTargetById(t);if(!s)return null;const i=s.blocks.getBlock(n);if(!i||"text"===i.opcode)return null;let a,o,r,d;if("data_variable"===i.opcode||"data_listcontents"===i.opcode||"argument_reporter_string_number"===i.opcode||"argument_reporter_boolean"===i.opcode)a=Object.values(i.fields)[0].value,o="data_variable"===i.opcode?"data":"data_listcontents"===i.opcode?"list":"more",r="round";else if("procedures_call"===i.opcode){const t=i.mutation.proccode;a=J(t);const n=e.tab.getCustomBlock(t);n?(o="addon-custom-block",d=n.color):o="more"}else if("procedures_definition"===i.opcode){const e=i.inputs.custom_block.block,t=s.blocks.getBlock(e).mutation.proccode;a=c.ScratchMsgs.translate("PROCEDURES_DEFINITION","define %1").replace("%1",J(t)),o="more"}else{var l;const e={jsonInit(e){l=e}},t=c.Blocks[i.opcode];if(t)try{t.init.call(e)}catch(e){}if(!l)return null;if(a=(e=>{const t=t=>{const n=e["message".concat(t)],s=e["args".concat(t)];if(!n)return null;const i=n.split(/%\d+/g);let a="";for(let e=0;e<i.length;e++){a+=i[e];const t=s&&s[e];if(t){const e=t.type;if("field_vertical_separator"===e);else if("field_image"===e){const e=t.src;e.endsWith("rotate-left.svg")?a+="↩":e.endsWith("rotate-right.svg")&&(a+="↪")}else a+="()"}}return a},n=[];let s=0;for(;;){const e=t(s);if(!e)break;n.push(e),s++}return n.join(" ")})(l),!a)return null;o=l.category;r=l.extensions&&(l.extensions.includes("shape_statement")||l.extensions.includes("shape_hat")||l.extensions.includes("shape_end"))||"previousStatement"in l||"nextStatement"in l?"stacked":"round"}if(!a||!o)return null;if(!d){const e={"data-lists":"data_lists",list:"data_lists",events:"event"},t=c.Colours[e[o]||o];d=t?t.primary:c.Colours.pen.primary}const u=document.createElement("span");u.className="sa-debugger-block-preview",u.textContent=a,u.style.backgroundColor=d,u.dataset.shape=r;return u.dataset.category={list:"data-lists",more:"custom"}[o]||o,u}},addon:e,msg:s,console:n};i=await y(P);const R=[i];for(const e of a)i.addLog(...e);let Q;a.length=0;const V=e=>{if(e===Q)return;Q&&(Q.hide(),Q.tab.element.classList.remove("sa-debugger-tab-selected")),e.tab.element.classList.add("sa-debugger-tab-selected"),Q=e,j(A),A.appendChild(e.content),j(p),p.appendChild(z.element);for(const t of e.buttons)p.appendChild(t.element);p.appendChild(W.element),w&&Q.show()};for(const e of R)e.tab.element.addEventListener("click",()=>{V(e)}),b.appendChild(e.tab.element);V(R[0]),e.tab.redux.state&&"small"===e.tab.redux.state.scratchGui.stageSize.stageSize&&document.body.classList.add("sa-debugger-small"),document.addEventListener("click",e=>{e.target.closest("[class*='stage-header_stage-button-first']")?document.body.classList.add("sa-debugger-small"):e.target.closest("[class*='stage-header_stage-button-last']")&&document.body.classList.remove("sa-debugger-small")},{capture:!0});const _=g.runtime.greenFlag;g.runtime.greenFlag=function(...t){return e.settings.get("log_clear_greenflag")&&i.clearLogs(),e.settings.get("log_greenflag")&&i.addLog(s("log-msg-flag-clicked"),null,"internal"),_.call(this,...t)};const X=g.runtime.targets[0].constructor.prototype.makeClone;g.runtime.targets[0].constructor.prototype.makeClone=function(...t){e.settings.get("log_failed_clone_creation")&&!g.runtime.clonesAvailable()&&i.addLog(s("log-msg-clone-cap",{sprite:this.getName()}),g.runtime.sequencer.activeThread,"internal-warn");var n=X.call(this,...t);return e.settings.get("log_clone_create")&&n&&i.addLog(s("log-msg-clone-created",{sprite:this.getName()}),g.runtime.sequencer.activeThread,"internal"),n};const F=g.runtime.startHats;for(g.runtime.startHats=function(t,n,...a){return e.settings.get("log_broadcasts")&&"event_whenbroadcastreceived"===t&&i.addLog(s("log-msg-broadcasted",{broadcast:n.BROADCAST_OPTION}),g.runtime.sequencer.activeThread,"internal"),F.call(this,t,n,...a)};;)await e.tab.waitForElement('[class*="stage-header_stage-size-row"]',{markAsSeen:!0,reduxEvents:["scratch-gui/mode/SET_PLAYER","scratch-gui/mode/SET_FULL_SCREEN","fontsLoaded/SET_FONTS_LOADED","scratch-gui/locales/SELECT_LOCALE"]}),"editor"===e.tab.editorMode?e.tab.appendToSharedSpace({space:"stageHeader",element:d,order:0}):D(!1)},"style.css":n.n(E).a}}}]);